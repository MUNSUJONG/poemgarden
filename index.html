
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>íŒŒì´ ê°ì„±ì •ì›</title>
</head>
<body style="background-color: #f9f3f3; text-align: center; padding: 50px; font-family: sans-serif;">
  <h1 style="color: #c2185b;">ğŸŒ¸ íŒŒì´ ê°ì„±ì •ì› ğŸŒ¸</h1>
  <p>0.01Ï€ í…ŒìŠ¤íŠ¸ ê²°ì œë¥¼ ì§„í–‰í•´ë³´ì„¸ìš”.</p>
  <button onclick="makePayment()" style="padding: 10px 20px; font-size: 16px; background-color: #e91e63; color: white; border: none; border-radius: 5px;">
    í…ŒìŠ¤íŠ¸ ê²°ì œ
  </button>

  <!-- Pi Network SDK ë¡œë“œ -->
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>

  <script>
    // SDK ì´ˆê¸°í™” (í…ŒìŠ¤íŠ¸ìš© sandbox í™œì„±í™”)
    Pi.init({ version: "2.0", sandbox: true });

    async function makePayment() {
      try {
        const scopes = ['username', 'payments'];
        const user = await Pi.authenticate(scopes, (payload) => {
          console.log('User info:', payload);
        });

        // ğŸ”¹ createPayment í˜¸ì¶œ ì‹œ await í•„ìˆ˜
        const payment = await Pi.createPayment(
          {
            amount: 0.01,
            memo: "íŒŒì´ ê°ì„±ì •ì› í…ŒìŠ¤íŠ¸ ê²°ì œ",
            metadata: { type: "test" }
          },
          {
            onReadyForServerApproval: function(paymentId) {
              console.log("âœ… ê²°ì œ ìŠ¹ì¸ ìš”ì²­:", paymentId);
            },
            onReadyForServerCompletion: function(paymentId, txid) {
              console.log("âœ… ê²°ì œ ì™„ë£Œ ì¤€ë¹„:", paymentId, txid);
            },
            onCancel: function(paymentId) {
              console.log("âŒ ê²°ì œ ì·¨ì†Œë¨:", paymentId);
              alert("ê²°ì œê°€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.");
            },
            onError: function(error, payment) {
              console.error("ğŸš« ê²°ì œ ì˜¤ë¥˜:", error);
              alert("ê²°ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: " + error.message);
            }
          }
        );

        // âœ… ê²°ì œ ìŠ¹ì¸ì°½ ë„ìš°ëŠ” í•µì‹¬ í˜¸ì¶œ
        await payment.approve();

      } catch (error) {
        console.error("ì¸ì¦ ì‹¤íŒ¨:", error);
        alert("ì¸ì¦ ì‹¤íŒ¨: " + error.message);
      }
    }
  </script>
</body>
</html>
