<!-- Pi Network SDK 불러오기 -->
<script src="https://sdk.minepi.com/pi-sdk.js"></script>

<script>
  // Pi SDK 초기화
  Pi.init({ version: "2.0" });

  async function makePayment() {
    try {
      const scopes = ['username', 'payments'];
      const user = await Pi.authenticate(scopes, (payload) => {
        console.log('User info:', payload);
      });

      Pi.createPayment(
        {
          amount: 0.01,
          memo: "파이 감성정원 테스트 결제",
          metadata: { type: "test" }
        },
        {
          onReadyForServerApproval: function(paymentId) {
            console.log('서버 승인 준비됨:', paymentId);
          },
          onReadyForServerCompletion: function(paymentId, txid) {
            console.log('서버 완료 준비됨:', paymentId, txid);
          },
          onCancel: function(paymentId) {
            console.log('결제 취소됨:', paymentId);
          },
          onError: function(error, payment) {
            console.error('결제 에러:', error, payment);
          }
        }
      );
    } catch (error) {
      console.error('인증 실패:', error);
    }
  }
</script>
