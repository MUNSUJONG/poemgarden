<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>íŒŒì´ ê°ì„±ì •ì›</title>
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>
  <script>
    // Pi ì•± AIP ì½”ë“œ ì„¤ì •
    const piAppId = "c514qbry24epcduq58dnbcslv3d2wpk8y3dyjirlamzmraqctfowk1sp8upbsczi";

    // Pi ë¡œê·¸ì¸
    async function piLogin() {
      try {
        const scopes = ['username', 'payments'];
        const authResult = await window.Pi.authenticate(scopes, onIncompletePaymentFound);
        alert("ë¡œê·¸ì¸ ì™„ë£Œ! ì‚¬ìš©ìëª…: " + authResult.user.username);
      } catch (error) {
        console.error("ë¡œê·¸ì¸ ì˜¤ë¥˜:", error);
      }
    }

    // ê²°ì œ ì²˜ë¦¬
    async function makePayment() {
      const paymentData = {
        amount: 0.01,
        memo: "ê°ì„±ì •ì› ê²°ì œ",
        metadata: { type: "test-payment" }
      };
      try {
        const payment = await window.Pi.createPayment(paymentData, {
          onReadyForServerApproval: function(paymentId) {
            console.log("ì„œë²„ ìŠ¹ì¸ í•„ìš”:", paymentId);
            // ì—¬ê¸°ì— ì„œë²„ ìŠ¹ì¸ ë¡œì§ ì¶”ê°€
          },
          onIncompletePaymentFound: onIncompletePaymentFound,
          onCancelled: function(paymentId) {
            alert("ê²°ì œê°€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.");
          },
          onError: function(error, payment) {
            console.error("ê²°ì œ ì˜¤ë¥˜:", error);
          }
        });
      } catch (err) {
        console.error(err);
      }
    }

    function onIncompletePaymentFound(payment) {
      console.log("ë¯¸ì™„ë£Œ ê²°ì œ ë°œê²¬:", payment);
    }
  </script>
</head>
<body style="background-color: #fff0f5; text-align: center; padding: 50px; font-family: 'Arial', sans-serif;">
  <h1 style="color: #c2185b;">ğŸŒ¸ íŒŒì´ ê°ì„±ì •ì› ğŸŒ¸</h1>
  <p>0.01Ï€ í…ŒìŠ¤íŠ¸ ê²°ì œë¥¼ ì§„í–‰í•´ë³´ì„¸ìš”.</p>
  <button onclick="piLogin()" style="padding: 12px 20px; margin: 10px; font-size: 16px;">ğŸ§‘â€ğŸ’» Pi ë¡œê·¸ì¸</button>
  <button onclick="makePayment()" style="padding: 12px 20px; font-size: 16px;">ğŸ’³ ê²°ì œí•˜ê¸°</button>
</body>
</html>
