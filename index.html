<!DOCTYPE html>
<html>
<head>
  <title>파이 감성정원</title>
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body>
  <h1>🌸 파이 감성정원 🌸</h1>
  <p>0.01π 테스트 결제를 진행해보세요.</p>
  <button onclick="payTest()">결제하기</button>

  <script>
    // SDK 초기화
    Pi.init({
      version: "2.0",
      sandbox: true // 반드시 테스트넷일 때 true
    });

    // 결제 실행 함수
    function payTest() {
      Pi.createPayment({
        amount: 0.01,
        memo: "파이 감성정원 테스트 결제",
        metadata: { purpose: "test" }
      }, {
        onReadyForServerApproval: function(paymentId) {
          console.log("서버 승인 준비됨: ", paymentId);
          alert("결제 요청 완료 (서버 승인 전 단계)");
          // 실제 서버 승인 로직이 없다면 이 상태로 30초 후 자동 만료됩니다
        },
        onReadyForServerCompletion: function(paymentId, txid) {
          console.log("결제 완료됨: ", paymentId, txid);
          alert("결제 완료! TxID: " + txid);
        },
        onCancel: function(paymentId) {
          alert("사용자가 결제를 취소했습니다.");
        },
        onError: function(error, payment) {
          console.error("결제 에러 발생: ", error);
          alert("결제 중 오류 발생: " + error);
        }
      });
    }
  </script>
</body>
</html>
